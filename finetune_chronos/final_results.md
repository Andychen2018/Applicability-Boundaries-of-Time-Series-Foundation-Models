# Chronos微调电机异常检测最终结果报告

## 实验概述

基于微调后的Chronos模型进行电机异常检测，使用ZhenDong域的测试数据进行评估。

- **测试数据**: 178个序列 (normal: 75, vibrate: 95, spark: 8)
- **序列长度**: 65536个数据点 (1秒@65536Hz)
- **patch_length**: 32 (将65536点分成2048个patches)
- **预测长度**: 48个数据点

## 两种方法对比

### 分类准确率对比

| 方法 | 模型类型 | 特征类型 | LightGBM | SVM | 最佳准确率 |
|------|----------|----------|----------|-----|------------|
| 方法A | Normal-only微调 | 残差特征 | 0.6852 | 0.7222 | **0.7222** |
| 方法B | All-class微调 | Embedding特征 | 0.7593 | 0.6667 | **0.7593** |

### 🏆 最佳结果

- **最佳方法**: 方法B (All-class + Embedding)
- **最佳分类器**: LightGBM
- **最佳准确率**: 0.7593

## 详细分析

### 方法A: Normal-only微调 + 残差特征

**策略**: 只用normal数据微调Chronos，然后计算预测残差作为异常检测特征
**理论**: normal数据残差小，异常数据残差大
**结果**:
- LightGBM: 0.6852
- SVM: 0.7222

**LightGBM分类报告**:
```
类别         精确率      召回率      F1分数    
----------------------------------------
normal     0.6818   0.6522   0.6667  
spark      0.0000   0.0000   0.0000  
vibrate    0.6875   0.7586   0.7213  
```

### 方法B: All-class微调 + Embedding特征

**策略**: 用所有三类数据微调Chronos，然后提取embedding特征进行分类
**理论**: 模型学习更丰富的模式，embedding包含更多判别信息
**结果**:
- LightGBM: 0.7593
- SVM: 0.6667

**LightGBM分类报告**:
```
类别         精确率      召回率      F1分数    
----------------------------------------
normal     0.8095   0.7391   0.7727  
spark      0.0000   0.0000   0.0000  
vibrate    0.7500   0.8276   0.7869  
```

## 关键发现

1. **方法B (All-class + Embedding) 效果更好**
   - 最佳准确率: 0.7593 vs 0.7222
   - 说明用全部数据微调能学到更好的特征表示

2. **LightGBM表现优于SVM**
   - 方法B中LightGBM: 0.7593 > SVM: 0.6667
   - 树模型更适合处理这类特征

3. **Spark类别识别困难**
   - 样本数量少 (仅8个)
   - 精确率和召回率都为0
   - 需要更多spark样本或数据增强

4. **Normal和Vibrate识别较好**
   - 这两类样本数量充足
   - F1分数都在0.7以上

## 技术细节

### 模型架构
- **基础模型**: chronos-bolt-base
- **Patch处理**: 65536点 → 2048个patches (每个32点)
- **Context长度**: 2048 (受模型限制)
- **预测长度**: 48
- **微调步数**: 5000
- **学习率**: 3e-5

### 特征提取
- **残差特征**: MAE, MSE, RMSE, 分位数, 分段统计, 自相关
- **Embedding特征**: 预测值统计 + 原始值统计 + 频域特征
- **特征维度**: ~20维

## 改进建议

1. **数据增强**: 对spark类别进行数据增强
2. **特征工程**: 添加更多领域相关的时频域特征
3. **模型集成**: 结合多个分类器的预测结果
4. **阈值优化**: 针对不同类别调整分类阈值
5. **更大模型**: 尝试chronos-large模型